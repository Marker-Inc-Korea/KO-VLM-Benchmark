# Introduction: KO-OCRAG (OCR for RAG)üòã
![img2](../Í∑∏Î¶º3_1.png)   
![img](../Í∑∏Î¶º4.png)   
`Í≥µÍ≥µÎç∞Ïù¥ÌÑ∞ÏÖãÌè¨ÌÑ∏`ÏóêÏÑúÎäî Ïã§Ï†ú ÏÇ∞ÏóÖÏóêÏÑú ÌôúÏö©ÎêòÎäî Îã§ÏñëÌïòÍ≥† Î≥µÏû°Ìïú Íµ¨Ï°∞Î•º Í∞ÄÏßÑ ÌïúÍµ≠Ïñ¥ Î¨∏ÏÑúÎ•º ÌíçÎ∂ÄÌïòÍ≤å Ï†úÍ≥µÌïòÍ≥† ÏûàÏäµÎãàÎã§.  
Ï†ÄÌù¨Îäî Í≥µÍ≥µÎç∞Ïù¥ÌÑ∞Î•º ÏßÅÏ†ë ÏàòÏßëÌïòÍ≥† Í∞ÄÍ≥µÌïòÏó¨, Í∏∞Ï°¥Ïùò Îã®ÏàúÌïú **ÌïúÍµ≠Ïñ¥ Î¨∏ÏÑú OCR**Ïù¥ ÏïÑÎãå **RAGÏö© ÌïúÍµ≠Ïñ¥ Î¨∏ÏÑú OCR**ÏùÑ ÌèâÍ∞ÄÌï† Ïàò ÏûàÎäî Îç∞Ïù¥ÌÑ∞ÏÖãÏù∏ **üî•KO-OCRAG (OCR for RAG)üî•**Î•º Ï†úÏûëÌïòÍ≤å ÎêòÏóàÏäµÎãàÎã§.  

Ï†ÄÌù¨ KO-OCRAG Îç∞Ïù¥ÌÑ∞ÏÖãÏóêÏÑúÎäî ÏïÑÎûòÏôÄ Í∞ôÏùÄ VLM Î™®Îç∏Ïùò ÏÑ±Îä•ÏùÑ ÌèâÍ∞ÄÌï† Ïàò ÏûàÏäµÎãàÎã§.üî•üî•
```
- Î≥µÏû°Ìïú ÌïúÍµ≠Ïñ¥ Î¨∏ÏÑú Íµ¨Ï°∞ Ïù¥Ìï¥
- Í≥†Ìï¥ÏÉÅÎèÑ ÌïúÍµ≠Ïñ¥ Î¨∏ÏÑú OCR Îä•Î†•
- Î¨∏ÏÑúÏóê Ï°¥Ïû¨ÌïòÎäî visual informationÏóê ÎåÄÌïú text description ÏÉùÏÑ± Îä•Î†•
- RAG parsingÏóê Ï†ÅÌï©Ìïú description ÏÉùÏÑ± Îä•Î†•
```

Ï†ÄÌù¨Í∞Ä Ï†úÏûëÌïú KO-OCRAG Îç∞Ïù¥ÌÑ∞ÏÖãÏùÄ Í∏∞Ï°¥ ÌïúÍµ≠Ïñ¥ VLM ÌèâÍ∞Ä Îç∞Ïù¥ÌÑ∞ÏÖãÎì§Í≥º ÎπÑÍµêÌïòÏòÄÏùÑ Îïå ÏïÑÎûòÏôÄ Í∞ôÏùÄ Ï£ºÏöîÌïú Ï∞®Î≥ÑÏ†êÏù¥ ÏûàÏäµÎãàÎã§!
```
Ïã§Ï†ú ÏÇ∞ÏóÖÏóêÏÑú ÌôúÏö©ÎêòÎäî Îã§ÏñëÌïú ÌòïÏãùÏùò ÌïúÍµ≠Ïñ¥ Î¨∏ÏÑú. (ÌòÑÏã§ÏÑ± üåü)
Í≥†Ìï¥ÏÉÅÎèÑÏùò Î≥µÏû°Ìïú Íµ¨Ï°∞Î•º Í∞ÄÏßÑ Îã§ÏñëÌïú ÌïúÍµ≠Ïñ¥ Î¨∏ÏÑú. (Îã§ÏñëÏÑ± üåü)
RAG parsingÏóê Ï†ÅÌï©Ìïú description ÏÉùÏÑ± Îä•Î†•. (RAG üåü)
```

# Environment
`Í≥µÍ≥µÎç∞Ïù¥ÌÑ∞ÏÖãÌè¨ÌÑ∏`ÏóêÏÑú ÏàòÏßëÌïú Îç∞Ïù¥ÌÑ∞ÏÖãÏùÑ Í∏∞Î∞òÏúºÎ°ú ÎßåÎì† ÌïúÍµ≠Ïñ¥ VLM Î≤§ÏπòÎßàÌÅ¨ Îç∞Ïù¥ÌÑ∞ÏÖã **(KO-OCRAG)**

```
pytorch == 2.3.0 with cuda 12.1
transformers == 4.57.1
qwen-vl-utils[decord] == 0.0.8
accelerate
flash-attn == 2.7.4.post1
evaluate == 0.3.0
rouge_score
jiwer == 3.0.0
```

# How to make datasetsüëΩ
`Í≥µÍ≥µÎç∞Ïù¥ÌÑ∞ÏÖãÌè¨ÌÑ∏`ÏóêÏÑú Ï†úÍ≥µÌïòÎäî Îã§ÏñëÌïú Îç∞Ïù¥ÌÑ∞ÏÖãÏùÄ, Ïã§Ï†ú ÏÇ∞ÏóÖÏóêÏÑú ÌôúÏö©ÎêòÎäî Îã§ÏñëÌïòÍ≥† Î≥µÏû°Ìïú Íµ¨Ï°∞Î•º Í∞ÄÏßÑ ÌïúÍµ≠Ïñ¥ Î¨∏ÏÑúÎ°ú Íµ¨ÏÑ±ÎêòÏñ¥ ÏûàÏäµÎãàÎã§.  
Ï†ÄÌù¨Îäî `Í≥µÍ≥µÎç∞Ïù¥ÌÑ∞ÏÖãÌè¨ÌÑ∏`ÏóêÏÑú ÏàòÏûëÏóÖÏúºÎ°ú `Í≥†Ìï¥ÏÉÅÎèÑ/Î≥µÏû°Ìïú Íµ¨Ï°∞/ÌíçÎ∂ÄÌïú Ïù¥ÎØ∏ÏßÄ&ÎèÑÏãù`ÏùÑ Î≥µÌï©Ï†ÅÏúºÎ°ú Í∞ÄÏßÄÍ≥† ÏûàÎäî Î¨∏ÏÑú ÌéòÏù¥ÏßÄ ÏïΩ 100Ïû•ÏùÑ ÏàòÏßëÌñàÏäµÎãàÎã§.ü¶æ   
Í∑∏Î¶¨Í≥† Í∞Å Îç∞Ïù¥ÌÑ∞ÏÖãÏóê OCRAG Î≤§ÏπòÎßàÌÅ¨Î•º ÏúÑÌïú ground-truth captionÏùÑ ÎßåÎì§Í∏∞ ÏúÑÌï¥, Ï¥ù **3Ï∞®Ïùò Îç∞Ïù¥ÌÑ∞ Ï†ïÏ†ú Í≥ºÏ†ï**ÏùÑ Í±∏Ï≥§ÏäµÎãàÎã§.
- 1Ï∞®: `gemini-2.5-pro`Î•º ÌôúÏö©Ìï¥ Îç∞Ïù¥ÌÑ∞ ÏÉùÏÑ±
- 2Ï∞®: `human editing`ÏùÑ Í±∏Ï≥ê Îç∞Ïù¥ÌÑ∞ Ï†ïÏ†ú
- 3Ï∞®: `human editing`ÏùÑ ÌÜµÌï¥ `RAG parsing`Ïóê Ï†ÅÌï©Ìïú Îç∞Ïù¥ÌÑ∞ Í∞ÄÍ≥µ

Ïó¨Í∏∞ÏÑú `RAG parsing` Îç∞Ïù¥ÌÑ∞ÎûÄ, **ÌÖçÏä§Ìä∏Ïóê ÎåÄÌïú OCR ground-truthÏôÄ ÎçîÎ∂àÏñ¥ÏÑú Ïù¥ÎØ∏ÏßÄ&ÎèÑÏãùÏóê ÎåÄÌïú text description Ìè¨Ìï®ÌïòÍ≥† ÏûàÎäî Îç∞Ïù¥ÌÑ∞**Î•º ÎßêÌï©ÎãàÎã§.  
Ï∂îÍ∞ÄÏ†ÅÏúºÎ°ú, `[image] ~ [/image]` tokenÏùÑ ÌôúÏö©ÌïòÏó¨ Ïù¥ÎØ∏ÏßÄ&ÎèÑÏãùÏóê ÎåÄÌïú description Î∂ÄÎ∂ÑÏùÑ Î™ÖÏãúÌïòÏó¨ `RAG parsing` Î™©Ï†ÅÏóê Îçî Ï†ÅÌï©ÌïòÎèÑÎ°ù Îç∞Ïù¥ÌÑ∞Î•º Í∞ÄÍ≥µÌïòÏòÄÏäµÎãàÎã§.   
ÏïÑÎûòÎäî Í∞ÑÎã®Ìïú Îç∞Ïù¥ÌÑ∞ÏÖãÏùò ÏòàÏãúÏûÖÎãàÎã§!üòã  
```
# Íµ≠Î∞©Ïã†Î¨∏_25_1ÏõîÌò∏_page-0080.jpg Ï§ë ÏùºÎ∂Ä
Í≥µÍµ∞ ÌïôÍµ∞Îã®ÏùÑ ÌÜµÌï©Ïö¥ÏòÅÌï† ‚ÄòÍ≥µÍµ∞ÌïôÏÉùÍµ∞ÏÇ¨ÌïôÍµê‚ÄôÍ∞Ä Ï∞ΩÏÑ§ÎêêÎã§.
Í≥µÍµ∞ÍµêÏú°ÏÇ¨Î†πÎ∂ÄÎäî 6Ïùº Î∂ÄÎåÄ Í∞ïÎãπÏóêÏÑú ÏÜêÏÑùÎùΩ(Ï§ëÏû•) ÏÇ¨Î†πÍ¥Ä Ï£ºÍ¥ÄÏúºÎ°ú ÌñâÏÇ¨Î•º Ïó¥Í≥† Í≥µÍµ∞ÌïôÏÉùÍµ∞ÏÇ¨ÌïôÍµê Ï∞ΩÏÑ§ÏùÑ ÎåÄÎÇ¥Ïô∏Ïóê ÏïåÎ†∏Îã§.
Í≥µÍµ∞ÌïôÏÉùÍµ∞ÏÇ¨ÌïôÍµêÎäî Í∞úÎ≥ÑÏ†ÅÏúºÎ°ú Ïö¥ÏòÅÎêòÎçò Í∞Å ÎåÄÌïô Í≥µÍµ∞ ÌïôÍµ∞Îã®ÏùÑ ÌïòÎÇòÎ°ú ÌÜµÌï©Ïö¥ÏòÅÌï¥, Í≥µÍµ∞ ÌïôÍµ∞Îã®Ïùò Ïó≠ÎüâÏùÑ Í∞ïÌôîÌïòÍ≥† Ï≤¥Í≥ÑÏ†ÅÏù¥Í≥† Ï†ÑÎ¨∏Ï†ÅÏù∏ ÌïôÍµ∞Îã® ÍµêÏú°ÌôòÍ≤ΩÏùÑ Íµ¨Ï∂ïÌïòÍ∏∞ ÏúÑÌï¥ Ï∞ΩÏÑ§ÎêêÎã§.
Í≥µÍµ∞ ÌïôÍµ∞Îã®ÏùÄ ÏßÄÎÇúÌï¥ Í∏∞Ï§Ä Ìï≠Í≥µÎåÄ, ÌïúÏÑúÎåÄ, ÍµêÌÜµÎåÄ Îì± 8Í∞ú ÎåÄÌïôÏóêÏÑú Ïö¥ÏòÅ Ï§ëÏù¥Îã§. Ïò¨Ìï¥ Í≤ΩÏö¥ÎåÄ, Ï≤≠Ï£ºÎåÄ, Î∞±ÏÑùÎåÄ, ÌïúÍ≤ΩÎåÄ 4Í∞ú ÎåÄÌïôÏóê Ï∂îÍ∞ÄÎ°ú Ïã†ÏÑ§Îê† ÏòàÏ†ïÏù¥Îã§.

[image] Îëê Î™ÖÏùò Í≥µÍµ∞ Ï†úÎ≥µÏùÑ ÏûÖÏùÄ ÎÇ®ÏÑ±Ïù¥ ÏïÖÏàòÎ•º ÌïòÎ©∞ Î∂ÄÎåÄÍ∏∞Î•º Ï£ºÍ≥†Î∞õÍ≥† ÏûàÎã§. ÏôºÏ™Ω ÎÇ®ÏÑ±Ïù¥ Ïò§Î•∏Ï™Ω ÎÇ®ÏÑ±ÏóêÍ≤å 'Í≥µÍµ∞'Ïù¥ÎùºÍ≥† Ïì∞Ïù∏ ÌïòÎäòÏÉâ Î∂ÄÎåÄÍ∏∞Î•º Í±¥ÎÑ§Ï£ºÍ≥† ÏûàÎã§. Î∞∞Í≤ΩÏóêÎäî Îã§Î•∏ Íµ∞Ïù∏Îì§Ïù¥ ÏïâÏïÑ Î∞ïÏàòÎ•º ÏπòÍ≥† ÏûàÎã§. [/image]
6Ïùº Í≥µÍµ∞ÌïôÏÉùÍµ∞ÏÇ¨ÌïôÍµê Ï∞ΩÏÑ§ÏãùÏóêÏÑú ÏÜêÏÑùÎùΩ(ÏôºÏ™Ω) Í≥µÍµ∞ÍµêÏú°ÏÇ¨Î†πÍ¥ÄÏù¥ Í≥†Í≤ΩÎçï Ï¥àÎåÄ ÍµêÏû•ÏóêÍ≤å Î∂ÄÎåÄÍ∏∞Î•º ÏàòÏó¨ÌïòÍ≥† ÏûàÎã§. Î∂ÄÎåÄ Ï†úÍ≥µ

Í≥µÍµ∞ÌïôÏÉùÍµ∞ÏÇ¨ÌïôÍµêÎäî Ï≤¥Í≥ÑÏ†ÅÏù∏ Ïö¥ÏòÅÍ≥º Í¥ÄÎ¶¨Î•º ÌÜµÌï¥ ÌïôÍµ∞ÌõÑÎ≥¥ÏÉùÎì§Ïù¥ Ï†ÑÎ¨∏ÏÑ±Í≥º Î¶¨ÎçîÏã≠ÏùÑ Í∞ñÏ∂ò Ïù∏Ïû¨Î°ú ÏÑ±Ïû•Ìï† Ïàò ÏûàÎèÑÎ°ù ÏßÄÏõêÌï† Í≥ÑÌöçÏù¥Îã§.
```
   
KO-OCRAG Îç∞Ïù¥ÌÑ∞ÏÖãÏùò ÏùºÎ∂Ä [subset](https://github.com/Marker-Inc-Korea/KO-VLM-Benchmark/blob/main/data/complex_document_OCR_benckmark_subset.xlsx)ÏùÑ `complex_document_OCR_benckmark_subset.xlsx`ÏóêÏÑú ÌôïÏù∏ÌïòÏã§ Ïàò ÏûàÏäµÎãàÎã§.üåû  
> Ï†ÑÏ≤¥ Î¨∏Ìï≠Ïóê ÎåÄÌï¥ÏÑúÎäî, Îç∞Ïù¥ÌÑ∞ Ïú†Ï∂ú Î∞è Îç∞Ïù¥ÌÑ∞ Ï†ÄÏûëÍ∂å Î¨∏Ï†úÎ°ú Ïù∏Ìï¥ Í≥µÏú†Í∞Ä Ïñ¥Î†µÏäµÎãàÎã§ü§´  
> GTÏóê Ìï¥ÎãπÌïòÎäî Ïó¥ÏùÄ `RAG-Parsing` ÏûÖÎãàÎã§!

# How to evaluateü¶æ
KO-OCRAG Îç∞Ïù¥ÌÑ∞ÏÖãÏùÄ Í∏∞Î≥∏Ï†ÅÏù∏ **ÌÖçÏä§Ìä∏ OCR Îä•Î†•**Í≥º ÎçîÎ∂àÏñ¥ÏÑú, Ïù¥ÎØ∏ÏßÄ/ÎèÑÏãùÏóê ÎåÄÌïú descriptionÏóê ÎåÄÌïú **ÏÉùÏÑ± Îä•Î†• ÌèâÍ∞Ä**Í∞Ä Ïù¥Î£®Ïñ¥Ï†∏ÏïºÌï©ÎãàÎã§.ü¶æ  
Ïù¥Îïå ÌÖçÏä§Ìä∏ OCRÏùÄ Ï†ïÎãµÏù¥ Ï†ïÌï¥Ï†∏ ÏûàÎäî Î∞òÎ©¥, Ïù¥ÎØ∏ÏßÄ/ÎèÑÏãùÏóê ÎåÄÌïú descriptionÏóê ÎåÄÌïú Î™ÖÌôïÌïú Ï†ïÎãµÏùÄ ÏóÜÏäµÎãàÎã§.ü§´    
  
Ïù¥Îü¨Ìïú Ï†êÏùÑ Î™®Îëê Í≥†Î†§ÌïòÏó¨ Ï†ÄÌù¨Îäî ÏïÑÎûòÏùò 3Í∞ÄÏßÄ metricÏóê ÎåÄÌïú average scoreÎ•º ÌôúÏö©ÌïòÏòÄÏäµÎãàÎã§:
- `WER`: Word error rate ÌèâÍ∞Ä
- `CER`: Charater error rate ÌèâÍ∞Ä 
- `Rouge-2 Recall`: Ïù¥ÎØ∏ÏßÄ/ÎèÑÏãùÏóê ÎåÄÌïú descriptionÏùò ÏùòÎØ∏Ï†Å Îä•Î†• ÌèâÍ∞Ä
> Average score: {(1-`WER`) + (1-`CER`) + `Rouge-2`}/3

Ï†ÄÌù¨Í∞Ä ÌèâÍ∞ÄÏóê Ïù¥Ïö©Ìïú promptÎäî Îã§ÏùåÍ≥º Í∞ôÏäµÎãàÎã§:
```
ÎãπÏã†ÏùÄ RAG parsingÏùÑ ÏúÑÌïú Optical Character Recognition (OCR)ÏùÑ ÏàòÌñâÌïòÎäî AI assistant ÏûÖÎãàÎã§. 
Îã§Ïùå Ï£ºÏñ¥ÏßÑ Î¨∏ÏÑúÏóê ÎÇòÌÉÄÎÇú ÌïúÍµ≠Ïñ¥ ÌÖçÏä§Ìä∏ Î¨∏Îã®ÏùÑ Î™®Îëê Î∞òÏòÅÌïòÍ≥†, Ïù¥ÎØ∏ÏßÄ/ÎèÑÏãù Ï§ë Ï§ëÏöîÌïòÏßÄ ÏïäÏùÄ ÎÇ¥Ïö©ÏùÄ Î∞òÏòÅÌïòÏßÄ ÏïäÏäµÎãàÎã§.
Ïù¥Îïå ÌÖçÏä§Ìä∏Îäî Í∑∏ÎåÄÎ°ú Ï†ÅÍ≥†, Ïù¥ÎØ∏ÏßÄ/ÎèÑÏãùÏùÄ [image]~[/image]ÎùºÎäî Íµ¨Î∂ÑÍ∏∞Ìò∏ÏôÄ Ï†ÅÏ†àÌïú ÏÑ§Î™ÖÏúºÎ°ú ÎåÄÏ≤¥ÌïòÏó¨ Ï†ÅÏñ¥ÏïºÌï©ÎãàÎã§. 
OCR Í≤∞Í≥º:
```
  
---

ÌèâÍ∞Ä ÏΩîÎìúÎäî ÏïÑÎûò Ïã¨ÌîåÌïòÍ≤å ÎèåÎ†§Î≥º Ïàò ÏûàÏäµÎãàÎã§!  
```bash
sh eval_OCRAG.sh
```
> You need to set `base_model` and `huggingfacce_token`.
  
# Resultsüåü
| Model | KO-OCRAG (Avg.) |
| ------------- | ------------- |
| `Gemini-2.5-pro` | NaN |
| `Gemini-2.5-flash` | NaN | 
| `Qwen2.5-VL-32B-Instruct` | NaN |
| `Qwen2.5-VL-7B-Instruct` | NaN |
| `Ovis2.5-2B (w/ thinking)` | NaN |
| `Ovis2.5-2B (w/o thinking)` | NaN |
| `VARCO-VISION-14B-HF` | NaN |
| `Gukbap-Ovis2-16B` | NaN |
| `Ovis2-16B` | NaN |
| `gemma-3-27b-it` | NaN |
| `Gukbap-Gemma3-27B-VL` | NaN |
| `Gukbap-Gemma3-12B-VL` | NaN |
| `Ovis2-34B` | NaN |
| `Gukbap-Ovis2-34B` | NaN |
| `gemma-3-12b-it` | NaN |
| `Bllossom-AICA-5B` | NaN |
   
# References
- [Í≥µÍ≥µÎç∞Ïù¥ÌÑ∞ÏÖãÌè¨ÌÑ∏](https://www.data.go.kr/index.do)
