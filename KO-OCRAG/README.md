# Introduction: KO-OCRAG (OCR for RAG)ğŸ˜‹
![img2](../resources/ê·¸ë¦¼3_1.png)
![img](../resources/ê·¸ë¦¼4.png)
`ê³µê³µë°ì´í„°ì…‹í¬í„¸`ì—ì„œëŠ” ì‹¤ì œ ì‚°ì—…ì—ì„œ í™œìš©ë˜ëŠ” ë‹¤ì–‘í•˜ê³  ë³µì¡í•œ êµ¬ì¡°ë¥¼ ê°€ì§„ í•œêµ­ì–´ ë¬¸ì„œë¥¼ í’ë¶€í•˜ê²Œ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤.
ì €í¬ëŠ” ê³µê³µë°ì´í„°ë¥¼ ì§ì ‘ ìˆ˜ì§‘í•˜ê³  ê°€ê³µí•˜ì—¬, ê¸°ì¡´ì˜ ë‹¨ìˆœí•œ **í•œêµ­ì–´ ë¬¸ì„œ OCR**ì´ ì•„ë‹Œ **RAGìš© í•œêµ­ì–´ ë¬¸ì„œ OCR**ì„ í‰ê°€í•  ìˆ˜ ìˆëŠ” ë°ì´í„°ì…‹ì¸ **ğŸ”¥KO-OCRAG (OCR for RAG)ğŸ”¥**ë¥¼ ì œì‘í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

ì €í¬ KO-OCRAG ë°ì´í„°ì…‹ì—ì„œëŠ” ì•„ë˜ì™€ ê°™ì€ VLM ëª¨ë¸ì˜ ì„±ëŠ¥ì„ í‰ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.ğŸ”¥ğŸ”¥
```
- ë³µì¡í•œ í•œêµ­ì–´ ë¬¸ì„œ êµ¬ì¡° ì´í•´
- ê³ í•´ìƒë„ í•œêµ­ì–´ ë¬¸ì„œ OCR ëŠ¥ë ¥
- ë¬¸ì„œì— ì¡´ì¬í•˜ëŠ” visual informationì— ëŒ€í•œ text description ìƒì„± ëŠ¥ë ¥
- RAG parsingì— ì í•©í•œ description ìƒì„± ëŠ¥ë ¥
```

ì €í¬ê°€ ì œì‘í•œ KO-OCRAG ë°ì´í„°ì…‹ì€ ê¸°ì¡´ í•œêµ­ì–´ VLM í‰ê°€ ë°ì´í„°ì…‹ë“¤ê³¼ ë¹„êµí•˜ì˜€ì„ ë•Œ ì•„ë˜ì™€ ê°™ì€ ì£¼ìš”í•œ ì°¨ë³„ì ì´ ìˆìŠµë‹ˆë‹¤!
```
ì‹¤ì œ ì‚°ì—…ì—ì„œ í™œìš©ë˜ëŠ” ë‹¤ì–‘í•œ í˜•ì‹ì˜ í•œêµ­ì–´ ë¬¸ì„œ. (í˜„ì‹¤ì„±ğŸŒŸ)
ê³ í•´ìƒë„ì˜ ë³µì¡í•œ êµ¬ì¡°ë¥¼ ê°€ì§„ ë‹¤ì–‘í•œ í•œêµ­ì–´ ë¬¸ì„œ. (ë‹¤ì–‘ì„±ğŸŒŸ)
RAG parsingì— ì í•©í•œ description ìƒì„± ëŠ¥ë ¥. (ì‚°ì—…ì„±ğŸŒŸ)
```

# Environment
`ê³µê³µë°ì´í„°ì…‹í¬í„¸`ì—ì„œ ìˆ˜ì§‘í•œ ë°ì´í„°ì…‹ì„ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“  í•œêµ­ì–´ VLM ë²¤ì¹˜ë§ˆí¬ ë°ì´í„°ì…‹ **(KO-OCRAG)**

```
pytorch == 2.3.0 with cuda 12.1
transformers == 4.57.1
qwen-vl-utils[decord] == 0.0.8
accelerate
flash-attn == 2.7.4.post1
evaluate == 0.3.0
rouge_score
jiwer == 3.0.0
```

# How to make datasetsğŸ‘½
`ê³µê³µë°ì´í„°ì…‹í¬í„¸`ì—ì„œ ì œê³µí•˜ëŠ” ë‹¤ì–‘í•œ ë°ì´í„°ì…‹ì€, ì‹¤ì œ ì‚°ì—…ì—ì„œ í™œìš©ë˜ëŠ” ë‹¤ì–‘í•˜ê³  ë³µì¡í•œ êµ¬ì¡°ë¥¼ ê°€ì§„ í•œêµ­ì–´ ë¬¸ì„œë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
ì €í¬ëŠ” `ê³µê³µë°ì´í„°ì…‹í¬í„¸`ì—ì„œ ìˆ˜ì‘ì—…ìœ¼ë¡œ `ê³ í•´ìƒë„/ë³µì¡í•œ êµ¬ì¡°/í’ë¶€í•œ ì´ë¯¸ì§€&ë„ì‹`ì„ ë³µí•©ì ìœ¼ë¡œ ê°€ì§€ê³  ìˆëŠ” ë¬¸ì„œ í˜ì´ì§€ ì•½ 100ì¥ì„ ìˆ˜ì§‘í–ˆìŠµë‹ˆë‹¤.ğŸ¦¾
ê·¸ë¦¬ê³  ê° ë°ì´í„°ì…‹ì— OCRAG ë²¤ì¹˜ë§ˆí¬ë¥¼ ìœ„í•œ ground-truth captionì„ ë§Œë“¤ê¸° ìœ„í•´, ì´ **3ì°¨ì˜ ë°ì´í„° ì •ì œ ê³¼ì •**ì„ ê±¸ì³¤ìŠµë‹ˆë‹¤.
- 1ì°¨: `gemini-2.5-pro`ë¥¼ í™œìš©í•´ ë°ì´í„° ìƒì„±
- 2ì°¨: `human editing`ì„ ê±¸ì³ ë°ì´í„° ì •ì œ
- 3ì°¨: `human editing`ì„ í†µí•´ `RAG parsing`ì— ì í•©í•œ ë°ì´í„° ê°€ê³µ

ì—¬ê¸°ì„œ `RAG parsing` ë°ì´í„°ë€, **í…ìŠ¤íŠ¸ì— ëŒ€í•œ OCR ground-truthì™€ ë”ë¶ˆì–´ì„œ ì´ë¯¸ì§€&ë„ì‹ì— ëŒ€í•œ text description í¬í•¨í•˜ê³  ìˆëŠ” ë°ì´í„°**ë¥¼ ë§í•©ë‹ˆë‹¤.
ì¶”ê°€ì ìœ¼ë¡œ, `[image] ~ [/image]` tokenì„ í™œìš©í•˜ì—¬ ì´ë¯¸ì§€&ë„ì‹ì— ëŒ€í•œ description ë¶€ë¶„ì„ ëª…ì‹œí•˜ì—¬ `RAG parsing` ëª©ì ì— ë” ì í•©í•˜ë„ë¡ ë°ì´í„°ë¥¼ ê°€ê³µí•˜ì˜€ìŠµë‹ˆë‹¤.
ì•„ë˜ëŠ” ê°„ë‹¨í•œ ë°ì´í„°ì…‹ì˜ ì˜ˆì‹œì…ë‹ˆë‹¤!ğŸ˜‹
```
# êµ­ë°©ì‹ ë¬¸_25_1ì›”í˜¸_page-0080.jpg ì¤‘ ì¼ë¶€
ê³µêµ° í•™êµ°ë‹¨ì„ í†µí•©ìš´ì˜í•  â€˜ê³µêµ°í•™ìƒêµ°ì‚¬í•™êµâ€™ê°€ ì°½ì„¤ëë‹¤.
ê³µêµ°êµìœ¡ì‚¬ë ¹ë¶€ëŠ” 6ì¼ ë¶€ëŒ€ ê°•ë‹¹ì—ì„œ ì†ì„ë½(ì¤‘ì¥) ì‚¬ë ¹ê´€ ì£¼ê´€ìœ¼ë¡œ í–‰ì‚¬ë¥¼ ì—´ê³  ê³µêµ°í•™ìƒêµ°ì‚¬í•™êµ ì°½ì„¤ì„ ëŒ€ë‚´ì™¸ì— ì•Œë ¸ë‹¤.
ê³µêµ°í•™ìƒêµ°ì‚¬í•™êµëŠ” ê°œë³„ì ìœ¼ë¡œ ìš´ì˜ë˜ë˜ ê° ëŒ€í•™ ê³µêµ° í•™êµ°ë‹¨ì„ í•˜ë‚˜ë¡œ í†µí•©ìš´ì˜í•´, ê³µêµ° í•™êµ°ë‹¨ì˜ ì—­ëŸ‰ì„ ê°•í™”í•˜ê³  ì²´ê³„ì ì´ê³  ì „ë¬¸ì ì¸ í•™êµ°ë‹¨ êµìœ¡í™˜ê²½ì„ êµ¬ì¶•í•˜ê¸° ìœ„í•´ ì°½ì„¤ëë‹¤.
ê³µêµ° í•™êµ°ë‹¨ì€ ì§€ë‚œí•´ ê¸°ì¤€ í•­ê³µëŒ€, í•œì„œëŒ€, êµí†µëŒ€ ë“± 8ê°œ ëŒ€í•™ì—ì„œ ìš´ì˜ ì¤‘ì´ë‹¤. ì˜¬í•´ ê²½ìš´ëŒ€, ì²­ì£¼ëŒ€, ë°±ì„ëŒ€, í•œê²½ëŒ€ 4ê°œ ëŒ€í•™ì— ì¶”ê°€ë¡œ ì‹ ì„¤ë  ì˜ˆì •ì´ë‹¤.

[image] ë‘ ëª…ì˜ ê³µêµ° ì œë³µì„ ì…ì€ ë‚¨ì„±ì´ ì•…ìˆ˜ë¥¼ í•˜ë©° ë¶€ëŒ€ê¸°ë¥¼ ì£¼ê³ ë°›ê³  ìˆë‹¤. ì™¼ìª½ ë‚¨ì„±ì´ ì˜¤ë¥¸ìª½ ë‚¨ì„±ì—ê²Œ 'ê³µêµ°'ì´ë¼ê³  ì“°ì¸ í•˜ëŠ˜ìƒ‰ ë¶€ëŒ€ê¸°ë¥¼ ê±´ë„¤ì£¼ê³  ìˆë‹¤. ë°°ê²½ì—ëŠ” ë‹¤ë¥¸ êµ°ì¸ë“¤ì´ ì•‰ì•„ ë°•ìˆ˜ë¥¼ ì¹˜ê³  ìˆë‹¤. [/image]
6ì¼ ê³µêµ°í•™ìƒêµ°ì‚¬í•™êµ ì°½ì„¤ì‹ì—ì„œ ì†ì„ë½(ì™¼ìª½) ê³µêµ°êµìœ¡ì‚¬ë ¹ê´€ì´ ê³ ê²½ë• ì´ˆëŒ€ êµì¥ì—ê²Œ ë¶€ëŒ€ê¸°ë¥¼ ìˆ˜ì—¬í•˜ê³  ìˆë‹¤. ë¶€ëŒ€ ì œê³µ

ê³µêµ°í•™ìƒêµ°ì‚¬í•™êµëŠ” ì²´ê³„ì ì¸ ìš´ì˜ê³¼ ê´€ë¦¬ë¥¼ í†µí•´ í•™êµ°í›„ë³´ìƒë“¤ì´ ì „ë¬¸ì„±ê³¼ ë¦¬ë”ì‹­ì„ ê°–ì¶˜ ì¸ì¬ë¡œ ì„±ì¥í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•  ê³„íšì´ë‹¤.
```

KO-OCRAG ë°ì´í„°ì…‹ì˜ ì¼ë¶€ [subset](https://github.com/Marker-Inc-Korea/KO-VLM-Benchmark/blob/main/data/complex_document_OCR_benckmark_subset.xlsx)ì„ `complex_document_OCR_benckmark_subset.xlsx`ì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.ğŸŒ
> ì „ì²´ ë¬¸í•­ì— ëŒ€í•´ì„œëŠ”, ë°ì´í„° ìœ ì¶œ ë° ë°ì´í„° ì €ì‘ê¶Œ ë¬¸ì œë¡œ ì¸í•´ ê³µìœ ê°€ ì–´ë µìŠµë‹ˆë‹¤ğŸ¤«
> GTì— í•´ë‹¹í•˜ëŠ” ì—´ì€ `RAG-Parsing` ì…ë‹ˆë‹¤!

# How to evaluateğŸ¦¾
KO-OCRAG ë°ì´í„°ì…‹ì€ ê¸°ë³¸ì ì¸ **í…ìŠ¤íŠ¸ OCR ëŠ¥ë ¥**ê³¼ ë”ë¶ˆì–´ì„œ, ì´ë¯¸ì§€/ë„ì‹ì— ëŒ€í•œ descriptionì— ëŒ€í•œ **ìƒì„± ëŠ¥ë ¥ í‰ê°€**ê°€ ì´ë£¨ì–´ì ¸ì•¼í•©ë‹ˆë‹¤.ğŸ¦¾
ì´ë•Œ í…ìŠ¤íŠ¸ OCRì€ ì •ë‹µì´ ì •í•´ì ¸ ìˆëŠ” ë°˜ë©´, ì´ë¯¸ì§€/ë„ì‹ì— ëŒ€í•œ descriptionì— ëŒ€í•œ ëª…í™•í•œ ì •ë‹µì€ ì—†ìŠµë‹ˆë‹¤.ğŸ¤«

ì´ëŸ¬í•œ ì ì„ ëª¨ë‘ ê³ ë ¤í•˜ì—¬ ì €í¬ëŠ” ì•„ë˜ì˜ 3ê°€ì§€ metricì— ëŒ€í•œ average scoreë¥¼ í™œìš©í•˜ì˜€ìŠµë‹ˆë‹¤:
- `WER`: Word error rate í‰ê°€
- `CER`: Charater error rate í‰ê°€
- `Rouge-2 Recall`: ì´ë¯¸ì§€/ë„ì‹ì— ëŒ€í•œ descriptionì˜ ì˜ë¯¸ì  ëŠ¥ë ¥ í‰ê°€
> Average score: {(1-`WER`) + (1-`CER`) + `Rouge-2`}/3

ì €í¬ê°€ í‰ê°€ì— ì´ìš©í•œ promptëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:
```
ë‹¹ì‹ ì€ RAG parsingì„ ìœ„í•œ Optical Character Recognition (OCR)ì„ ìˆ˜í–‰í•˜ëŠ” AI assistant ì…ë‹ˆë‹¤.
ë‹¤ìŒ ì£¼ì–´ì§„ ë¬¸ì„œì— ë‚˜íƒ€ë‚œ í•œêµ­ì–´ í…ìŠ¤íŠ¸ ë¬¸ë‹¨ì„ ëª¨ë‘ ë°˜ì˜í•˜ê³ , ì´ë¯¸ì§€/ë„ì‹ ì¤‘ ì¤‘ìš”í•˜ì§€ ì•Šì€ ë‚´ìš©ì€ ë°˜ì˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
ì´ë•Œ í…ìŠ¤íŠ¸ëŠ” ê·¸ëŒ€ë¡œ ì ê³ , ì´ë¯¸ì§€/ë„ì‹ì€ [image]~[/image]ë¼ëŠ” êµ¬ë¶„ê¸°í˜¸ì™€ ì ì ˆí•œ ì„¤ëª…ìœ¼ë¡œ ëŒ€ì²´í•˜ì—¬ ì ì–´ì•¼í•©ë‹ˆë‹¤.
OCR ê²°ê³¼:
```

---

í‰ê°€ ì½”ë“œëŠ” ì•„ë˜ ì‹¬í”Œí•˜ê²Œ ëŒë ¤ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤!
```bash
sh eval_OCRAG.sh
```
> You need to set `base_model` and `huggingfacce_token`.

# ResultsğŸŒŸ
| Model | KO-OCRAG (Avg.) |
| ------------- | ------------- |
| `Closed-model` | ---- |
| `Gemini-3-pro` | 71.60 |
| `Gemini-2.5-pro` | **73.06** |
| `Gemini-2.5-flash` | 65.76 |
| `Open-model` | ---- |
| `Qwen3-VL-30B-A3B-Instruct` | 60.60 |
| `Qwen3-VL-8B-Instruct` | **63.67** |
| `Qwen3-VL-4B-Instruct` | **60.74** |
| `Qwen2.5-VL-32B-Instruct` | 58.00 |
| `Qwen2.5-VL-7B-Instruct` | 58.21 |
| `Ovis2.5-9B` | 59.16 |
| `Ovis2.5-2B` | 53.26 |
| `Ovis2-34B` | 31.62 |
| `Ovis2-16B` | 41.31 |
| `Gemma-3-27b-it` | 5.58 |
| `Gemma-3-12b-it` | 25.68 |
| `Gukbap-Ovis2-16B` | 42.04 |
| `VARCO-VISION-2.0-14B-HF` | 38.30 |
| `VARCO-VISION-14B-HF` | 2.57 |
| `Bllossom-AICA-5B` | 0.80 |
> KO-OCRAG: `{(1-WER)+(1-CER)+rough2}/3`

# References
- [ê³µê³µë°ì´í„°ì…‹í¬í„¸](https://www.data.go.kr/index.do)
